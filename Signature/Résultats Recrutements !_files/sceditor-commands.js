$.sceditor.ie=(function(){var undef,v=3,div=document.createElement('div'),all=div.getElementsByTagName('i');do{div.innerHTML='<!--[if gt IE '+(++v)+']><i></i><![endif]-->'}while(all[0]);if((document.all&&window.atob)){v=10}else if(((!!window.MSStream)&&("ActiveXObject"in window))){v=11}return v>4?v:undef}());var FA_SCEditor={characters:{FASpecialCharacters:[";"," ","\"","<",">","%","|","\\","^","~","[","]","`"],FAEncodedCharacters:["%3B","%20","%22","%3C","%3E","%25","%7C","%5C","%5E","%7E","%5B","%5D","%60"]},functions:{FAdecodeURI:function(url){for(var i=0;i<FA_SCEditor.characters.FAEncodedCharacters.length;i++){url=url.replace(new RegExp(FA_SCEditor.characters.FAEncodedCharacters[i],'g'),FA_SCEditor.characters.FASpecialCharacters[i])}return url},showHideToolbarElements:function(){if($(".sceditor-button-subscript").parent().css("display")!=="none"){$(".sceditor-button-subscript").parent().css("display","none");$(".sceditor-button-fascroll").parent().css("display","none")}else{$(".sceditor-button-subscript").parent().css("display","inline-block");$(".sceditor-button-fascroll").parent().css("display","inline-block")}},getUploadFrame:function(){var uploadFrame=null;if($('.sceditor-tinypic').length===1)uploadFrame=$('.sceditor-tinypic');else if($('.sceditor-servimg').length===1)uploadFrame=$('.sceditor-servimg');if(uploadFrame){$(document).click(function(){uploadFrame.css('display','none')})}return uploadFrame},closeDropDown:function(){var uploadFrame=null,emoticonFrame=null;if($('.sceditor-tinypic').length===1)uploadFrame=$('.sceditor-tinypic');else if($('.sceditor-servimg').length===1)uploadFrame=$('.sceditor-servimg');if($('.sceditor-emoticon').length===1)emoticonFrame=$('.sceditor-emoticon');if(uploadFrame){uploadFrame.css('display','none')}if(emoticonFrame){emoticonFrame.css('display','none')}},toggleSourceMode:function(){var editor=$("#text_editor_textarea").sceditor("instance");var end=editor.getSourceEditorValue()?editor.getSourceEditorValue().substr(-6,6):'<br />';if(editor.inSourceMode())editor.setSourceEditorValue(editor.getWysiwygEditorValue());else editor.setWysiwygEditorValue(editor.getSourceEditorValue())}}};$.sceditor.regexEscape=function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace("<","&lt;").replace(">","&gt;")};$.sceditor.command.set("source",{exec:function(caller){this.toggleSourceMode();this.blur();$.cookie('WYSIWYG_STATE','0',{expires:365});caller.addClass('hover')},txtExec:function(caller){this.toggleSourceMode();this.blur();$.cookie('WYSIWYG_STATE','1',{expires:365});caller.removeClass('hover')},tooltip:"Switch Editor Mode",shortcut:"ctrl+shift+s"});$.sceditor.command.set('',{});$.sceditor.command.set("font",{_dropDown:function(editor,caller,callback){var fonts=editor.opts.fonts.split(","),content=$('<div class="url" />'),clickFunc=function(){callback($(this).data('font'));editor.closeDropDown(true);return false};for(var i=0;i<fonts.length;i++)content.append($('<a class="sceditor-font-option" href="#" data-font="'+fonts[i]+'"><font face="'+fonts[i]+'">'+fonts[i]+'</font></a>').click(clickFunc));editor.createDropDown(caller,"font-picker",content)},exec:function(caller){var editor=this;$.sceditor.command.get('font')._dropDown(editor,caller,function(fontName){editor.execCommand("fontname",fontName)})},tooltip:"Font Name"});$.sceditor.command.set("size",{_dropDown:function(editor,caller,callback){var sizeAssoc={1:10,2:13,3:16,4:18,5:24},content=$("<div />"),clickFunc=function(e){callback($(this).data('size'));editor.closeDropDown(true);e.preventDefault()};for(var i=1;i<=5;i++)content.append($('<a class="sceditor-fontsize-option" data-size="'+sizeAssoc[i]+'" href="#"><span style="font-size: '+sizeAssoc[i]+'px;">'+sizeAssoc[i]+'</span></a>').click(clickFunc));editor.createDropDown(caller,"fontsize-picker",content)},exec:function(caller){var editor=this;$.sceditor.command.get('size')._dropDown(editor,caller,function(fontSize){var sizeAssoc={10:1,13:2,16:3,18:4,24:5};var sel=editor.getContentAreaContainer()[0].contentDocument.getSelection();if($(sel.anchorNode.parentNode).text()==sel.anchorNode.nodeValue)$(sel.anchorNode.parentNode).css("font-size","");editor.execCommand('fontsize',sizeAssoc[fontSize])})},tooltip:"Font Size"});$.sceditor.command.set("quote",{forceNewLineAfter:['blockquote'],_dropDown:function(editor,caller,handleIdFunc){var content=$('<div><label for="authorlabel">'+editor._("Author (optional)")+'</label><input type="text" id="authorlabel" value="" /></div><div><input type="button" class="button" value="'+editor._("Insert")+'" /></div>');content.find('.button').click(function(e){var val=content.find("#authorlabel").val();handleIdFunc(val);editor.closeDropDown(true);e.preventDefault()});editor.createDropDown(caller,"insertquote",content)},exec:function(caller){var editor=this;$.sceditor.command.get('quote')._dropDown(editor,caller,function(author){var before='<blockquote>',end='</blockquote><br />';if(author!==''){before=before+'<cite>'+author+'</cite>'}if(editor.getRangeHelper().selectedHtml()===""){end='<br />'+end}editor.wysiwygEditorInsertHtml(before,end)})},txtExec:function(caller){var editor=this;$.sceditor.command.get('quote')._dropDown(editor,caller,function(author){var before='<blockquote>',end='</blockquote><br />';if(author!==''){before=before+'<cite>'+author+'</cite>'}if(editor.getRangeHelper().selectedHtml()===""){end='<br />'+end}editor.insertText(before,end)})},tooltip:"Insert a Quote"});$.sceditor.command.set("code",{forceNewLineAfter:['code'],exec:function(caller){var end='</code><br />';if(this.getRangeHelper().selectedHtml()===""){end='<br />'+end}this.wysiwygEditorInsertHtml('<code>',end)},tooltip:"Code"});$.sceditor.command.set("link",{_dropDown:function(editor,caller,handler){var content=$('<div><label for="linksrc">'+editor._("URL:")+'</label> <input type="text" id="linksrc" class="url" placeholder="http://" value="" /></div><div><label for="linktitle">'+editor._("Description (optional):")+'</label> <input type="text" id="linktitle" value="" /></div><div><input type="button" class="button" value="'+editor._("Insert")+'" /></div>');content.find('.button').click(function(e){var values=new Array(),src=content.find("#linksrc").val(),description=content.find("#linktitle").val();if(!description){description=src}values['src']=src;values['desc']=description;handler(values);editor.closeDropDown(true);e.preventDefault()});editor.createDropDown(caller,"insertlink",content)},exec:function(caller){var editor=this;$.sceditor.command.get('link')._dropDown(editor,caller,function(values){if(values['src']){editor.wysiwygEditorInsertHtml('<a href="'+values['src']+'">'+values['desc']+'</a>')}})},tooltip:"Insert a link"});$.sceditor.command.set("unlink",{exec:"unlink",tooltip:"Unlink"});$.sceditor.command.set("servimg",{_menu:function(editor,caller){var uploadFrame=null;if($('.sceditor-tinypic').length===1)uploadFrame=$('.sceditor-tinypic');else if($('.sceditor-servimg').length===1)uploadFrame=$('.sceditor-servimg');if(uploadFrame===null){var menu,name,content,css={top:caller.offset().top,left:caller.offset().left,marginTop:caller.outerHeight()};if(servImgAccount===''&&servImgId===''&&servImgF===''){name='tinypic';content=$('<p><iframe src="http://plugin.tinypic.com/plugin/index.php?popts=l,narrow|t,images|c,forum|i,'+_userdata.user_lang+'|s,false" scrolling="auto" allowtransparency="true" frameborder="0" width="300" height="400">Update your browser for tinypic.com</iframe></p>')}else{name='servimg';content=$('<p><iframe id="obj_servimg" src="http://'+servimgDomain+'/multiupload.php?&mode=fae&account='+servImgAccount+'&id='+servImgId+'&f='+servImgF+'" width="540" height="230" border="0"></iframe></p>')}menu=$('<div class="sceditor-dropdown sceditor-'+name+'" />').css(css).append(content).appendTo($('body')).click(function(e){e.stopPropagation()})}else{if(uploadFrame.css('display')==='none'){editor.closeDropDown();uploadFrame.css('display','')}else{editor.closeDropDown()}}},exec:function(caller){$.sceditor.command.get('servimg')._menu(this,caller)},txtExec:function(caller){$.sceditor.command.get('servimg')._menu(this,caller)},tooltip:"Host an image"});$.sceditor.command.set("image",{_dropDown:function(editor,caller,handler){var url=editor._("URL:");var width=editor._("Width (optional):");var height=editor._("Height (optional):");var insert=editor._("Insert");var image='<div><label for="link">'+url+'</label> <input type="text" id="image" class="url" placeholder="http://" /></div>'+'<div><label for="width">'+width+'</label> <input type="text" id="width" size="2" /></div>'+'<div><label for="height">'+height+'</label> <input type="text" id="height" size="2" /></div>'+'<div><input type="button" class="button" value="'+insert+'" /></div>';var content=$(image);content.find('.button').click(function(e){var values=new Array(),width=content.find("#width").val(),height=content.find("#height").val();values['src']=content.find("#image").val();values['attrs']='';if(width){values['attrs']+=' width=\"'+width+'\"';values['width']=width}if(height){values['attrs']+=' height="'+height+'"';values['height']=height}handler(values);editor.closeDropDown(true);e.preventDefault()});editor.createDropDown(caller,"insertimage",content)},exec:function(caller){var editor=this;$.sceditor.command.get('image')._dropDown(editor,caller,function(values){if(values['src'])editor.wysiwygEditorInsertHtml('<img'+values['attrs']+' src="'+values['src']+'" />')})},txtExec:function(caller){var editor=this;$.sceditor.command.get('image')._dropDown(editor,caller,function(values){if(values['src'])editor.insertText('<img'+values['attrs']+' src="'+values['src']+'" />')})},tooltip:"Insert an image"});$.sceditor.command.set("table",{exec:function(caller){var editor=this,border=editor._("Border:"),rows=editor._("Rows:"),cols=editor._("Cols:"),insert=editor._("Insert"),table='<div><label for="border">'+border+'</label><input type="text" id="border" value="1" /></div>'+'<div><label for="rows">'+rows+'</label><input type="text" id="rows" value="2" /></div>'+'<div><label for="cols">'+cols+'</label><input type="text" id="cols" value="2" /></div>'+'<div><input type="button" class="button" value="'+insert+'" /></div>',content=$(table);content.find('.button').click(function(e){var border=content.find("#border").val()-0,rows=content.find("#rows").val()-0,cols=content.find("#cols").val()-0,html='<table>';if(rows<1||cols<1)return;if(border>0)html='<table border="'+border+'">';for(var row=0;row<rows;row++){html+='<tr>';for(var col=0;col<cols;col++)html+='<td>'+($.sceditor.ie?'':'<br />')+'</td>';html+='</tr>'}html+='</table>';editor.wysiwygEditorInsertHtml(html);editor.closeDropDown(true);e.preventDefault()});editor.createDropDown(caller,"inserttable",content)},tooltip:"Insert a table"});$.sceditor.command.set('color',{_dropDown:function(editor,caller,callback){var i,x,color,colors,genColor={r:255,g:255,b:255},content=$("<div />"),colorColumns=editor.opts.colors?editor.opts.colors.split("|"):new Array(6),html=[],cmd=$.sceditor.command.get('color');if(!cmd._htmlCache){for(i=0;i<colorColumns.length;++i){colors=colorColumns[i]?colorColumns[i].split(","):new Array(37);html.push('<div class="sceditor-color-column">');for(x=1;x<colors.length;++x){color=colors[x]||"#"+genColor.r.toString(16)+genColor.g.toString(16)+genColor.b.toString(16);html.push('<a href="#" class="sceditor-color-option" style="background-color: '+color+'" data-color="'+color+'" title="'+color+'"></a>');if(x%6===0){genColor.g-=51;genColor.b=255;if(genColor.g<51){genColor.g="00"}}else genColor.b-=51;if(genColor.b<51){genColor.b="00"}}html.push('</div>');if(i%1===0){genColor.r-=51;genColor.g=255;genColor.b=255;if(genColor.r<51){genColor.r="00"}}else{genColor.g=255;genColor.b=255}}cmd._htmlCache=html.join('')}content.append(cmd._htmlCache).find('a').click(function(e){callback($(this).attr('data-color'));editor.closeDropDown(true);e.preventDefault()});editor.createDropDown(caller,"color-picker",content)},_menu:function(editor,caller,callback){var colors={},html=$('<div />');colors[editor._('color_dark_red')]='#660000';colors[editor._('color_red')]='#FF0000';colors[editor._('color_orange')]='#FF9933';colors[editor._('color_brown')]='#663300';colors[editor._('color_yellow')]='#FFFF00';colors[editor._('color_green')]='#006600';colors[editor._('color_olive')]='#666633';colors[editor._('color_cyan')]='#00FFFF';colors[editor._('color_blue')]='#0000FF';colors[editor._('color_dark_blue')]='#000099';colors[editor._('color_indigo')]='#6600FF';colors[editor._('color_violet')]='#990099';colors[editor._('color_grey')]='#999999';colors[editor._('color_white')]='#EEEEEE';colors[editor._('color_black')]='#000000';for(var k in colors)html.append('<div><a class="sceditor-fontsize-option"><font color="'+colors[k]+'">'+k+'</font></a></div>');html.find('font').click(function(e){callback($(this).attr('color'));editor.closeDropDown(true);e.preventDefault()});editor.createDropDown(caller,"color-picker",html)},exec:function(caller){var editor=this;if(palette===1){$.sceditor.command.get('color')._dropDown(editor,caller,function(color){editor.execCommand("forecolor",color)})}else{$.sceditor.command.get('color')._menu(editor,caller,function(color){editor.execCommand("forecolor",color)})}},tooltip:"Font Color"});$.sceditor.command.set('emoticon',{_menu:function(editor,caller){var uploadFrame=null;if($('.sceditor-emoticon').length===1)uploadFrame=$('.sceditor-emoticon');if(uploadFrame){if(uploadFrame.css('display')==='none'){editor.closeDropDown();uploadFrame.css('display','')}else{editor.closeDropDown()}}else{var menu,iframeSrc=((typeof(editor.opts.emoticonsURL)==='undefined'||editor.opts.emoticonsURL===""||editor.opts.emoticonsURL===null)?'/smilies.forum?mode=smilies_frame&t='+(new Date().getTime())+'&timeinfo=null':editor.opts.emoticonsURL),content=$('<iframe />').attr({"class":"row1","height":"250","id":"quickEmojInternal","marginheight":"0","marginwidth":"0","name":"smilies","scrolling":"auto","src":iframeSrc,"width":"220"}).css({"border":"none","visibility":"hidden"}).load(function(){$(this).css("visibility","visible").parent().css("background-image","none")}),css={top:caller.offset().top,left:caller.offset().left,marginTop:caller.outerHeight(),background:"#FFFFFF url('http://"+illiwebDomain+"/fa/i/loader.gif') no-repeat center center"};menu=$('<div class="sceditor-dropdown sceditor-emoticon" />').css(css).append(content).appendTo($('body')).click(function(e){e.stopPropagation()})}},exec:function(caller){$.sceditor.command.get('emoticon')._menu(this,caller)},txtExec:function(caller){$.sceditor.command.get('emoticon')._menu(this,caller)},tooltip:"Insert an emoticon"});$.sceditor.command.set("more",{exec:function(){FA_SCEditor.functions.showHideToolbarElements()},txtExec:function(){FA_SCEditor.functions.showHideToolbarElements()},tooltip:"More"});$.sceditor.command.set("headers",{_dropDown:function(editor,caller,callback){var $content=$("<div />");for(var i=2;i<=4;i++){$('<h'+i+' class="sceditor-header-option post-content">H'+i+'</h'+i+'>').data('headersize',i).click(function(e){callback($(this).data('headersize'));editor.closeDropDown(true);e.preventDefault()}).css({'margin':0,'border':0,'color':'#333','cursor':'pointer','text-transform':'none'}).hover(function(){$(this).css('background-color','#EEE')},function(){$(this).css('background-color','#FFF')}).appendTo($content)}editor.createDropDown(caller,"header-picker",$content)},exec:function(caller){var editor=this;$.sceditor.command.get('headers')._dropDown(editor,caller,function(lvl){editor.execCommand("formatblock","<h"+lvl+">")})},tooltip:"Format Headers"});